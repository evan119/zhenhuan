<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Document</title>
<style>
/**{
    margin: 0;
    padding: 0;
    list-style: none;
}
.box{
    position: relative;
    width: 800px;
    height: 800px;
    margin: 0 auto;
}
.p0{
    text-align: center;
}
.p1{
    display: inline-block;
    width: 150px;
    height: 100px;
    text-align: center;
    margin-left: 100px;
}

.p2{
    position: absolute;
    display: inline-block;
    width: 150px;
    height: 100px;
    text-align: center;
    right: 100px;

}
.vs{
    position: absolute;
    display: inline-block;
    width: 100px;
    height: 100px;
    line-height: 100px;
    left: 380px;

}
.main{
    width: 800px;
    height: 696px;
}


.main .middle{
    display: inline-block;
    position: absolute;
    width: 400px;
    height: 400px;
    top: 143px;
    right: 250px;
}

.start{
    position: absolute;
    top: 152px;
    left: 360px;
}*/
</style>
</head>

<body>
<!--     <div class="box">
        <br>
        <div class="p0">ã€å§“åã€‘ç”„å¬› ã€ä½åˆ†ã€‘å¦ƒ ã€ç»éªŒå€¼ã€‘1452/2000</div>
        <br>
        <div class="p1"><p class="name">ç”„å¬›</p><span>hp:</span><span id="myHp">100</span><span>å¿ƒæœº</span><span id="mySpeed">75</span></div>
        <div class="vs"><span>V S</span></div>
        <div class="p2"><p class="name">å¯¹æ‰‹</p><span>hp:</span><span id="hp">100</span><span>å¿ƒæœº</span><span id="speed">75</span></div>
        <div class="main">
            <button class="start">å¼€å§‹å®«æ–—</button>
            <div class="middle"></div>
        </div>
    </div> -->
    <div style="display: table; width: 100%; margin: 10px 10px 10px 10px;">
        <div class = "left" style=" display: table-cell;  width: 300px; border-right: 1px solid gray" >
            <p style="color:red;">ğŸ‘‘ = ç©å®¶èµ„æ–™ = ğŸ‘‘</p>
            <p>ã€å§“åã€‘ç”„å¬›</p>
            <p>ã€ä½åˆ†ã€‘<span id="level">å«”</span></p>
            <p>ã€ç»éªŒå€¼ã€‘<span id="curExp">1850</span> / <span id="needExp">2000</span></p>
            <p>ã€HPã€‘<span id="maxHP">100</span></p>
            <p>ã€å¿ƒæœºã€‘<span id="maxSpeed">100</span></p>
            <br>
            <hr>
            <br>
            <div style="">
                <p style="color: red;">ğŸŒº~ æ™‹å°æ¶ˆæ¯ ~ ğŸŒº</p>
                <div class="news" style="width: 300px; ">
                    <!-- <p>åˆå…¥å®«é—±å¾—åˆ°çš‡å¸ä¸´å¹¸ï¼Œè¢«å°ä¸ºã€è´µäººã€‘</p>
                    <p>åœ¨å®«æ–—ä¸­è¿‡å…³æ–©å°†ï¼Œè¢«å°ä¸ºã€å«”ã€‘</p>
                    <p>åœ¨å®«æ–—ä¸­è¿‡å…³æ–©å°†ï¼Œè¢«å°ä¸ºã€å¦ƒã€‘</p>
                    <p>åœ¨å®«æ–—ä¸­è¿‡å…³æ–©å°†ï¼Œè¢«å°ä¸ºã€è´µå¦ƒã€‘</p>
                    <p>åœ¨å®«æ–—ä¸­è¿‡å…³æ–©å°†ï¼Œè¢«å°ä¸ºã€çš‡è´µå¦ƒã€‘</p>
                    <p>åœ¨å®«æ–—ä¸­æƒ¨é­é™·å®³ï¼Œè¢«é™ä¸ºã€ç­”åº”ã€‘</p>
                    <p>åœ¨å®«æ–—ä¸­è¿‡å…³æ–©å°†ï¼Œè¢«å°ä¸ºã€å«”ã€‘</p>
                    <p>åœ¨å®«æ–—ä¸­è¿‡å…³æ–©å°†ï¼Œè¢«å°ä¸ºã€å¦ƒã€‘</p>
                    <p>åœ¨å®«æ–—ä¸­è¿‡å…³æ–©å°†ï¼Œè¢«å°ä¸ºã€è´µå¦ƒã€‘</p>
                    <p>åœ¨å®«æ–—ä¸­è¿‡å…³æ–©å°†ï¼Œè¢«å°ä¸ºã€çš‡è´µå¦ƒã€‘</p>
                    <p>åœ¨å®«æ–—ä¸­æƒ¨é­é™·å®³ï¼Œè¢«é™ä¸ºã€ç­”åº”ã€‘</p> -->
                </div>
            </div>
        </div>
        <div class = "right" style="display: table-cell;">
            <div style="display: table; width: 100%">
                <div style="display: table-cell; text-align: center;">
                    <p>ç”„å¬›</p>
                    <p>HP: <span id="myHp">100</span></p>
                    <p>å¿ƒæœº: <span id="mySpeed">100</span></p>
                </div>
                <div style="display: table-cell; text-align: center;">
                    <p>------</p>
                    <p>V.S.</p>
                    <p>------</p>
                </div>
                <div style="display: table-cell; text-align: center;">
                    <p><span id="name">å¯¹æ‰‹</span></p>
                    <p>HP: <span id="hp">999</span></p>
                    <p>å¿ƒæœº: <span id="speed">999</span></p>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px; ">
                <button style="font-size: 20px" class="start">å¼€å§‹å®«æ–—</button>
                <div class="middle" style="text-align: left; width: 70%; margin-left: auto; margin-right: auto;"></div>
            </div>
    
        </div>
        
    </div>
</body>

<script>

var myHp = document.getElementById('myHp');
var mySpeed = document.getElementById('mySpeed');
var oName = document.getElementById('name');
var oHp = document.getElementById('hp');
var oSpeed = document.getElementById('speed');
var oBtn = document.getElementsByClassName('start')[0];
var middle = document.getElementsByClassName('middle')[0];
var startBtn = document.getElementsByClassName("start")[0];
var newsBox = document.getElementsByClassName("news")[0];

var infoLevel = document.getElementById("level");
var infoCurExp = document.getElementById("curExp");
var infoNeedExp = document.getElementById("needExp");
var infoHP = document.getElementById("maxHP");
var infoSpeed = document.getElementById("maxSpeed");

var turn = 1;
var circle = true;

var person = [
    {
        name: 'å®‰é™µå®¹',
        hp: 105,
        speed :100,
        skill: ["å¯¹ä½ ä½¿ç”¨äº†èˆ’ç—•èƒ¶", "å‘çš‡ä¸Šå±•ç¤ºäº†å†°å¬‰", "å¯¹ä½ æŠ•æ”¾äº†éºé¦™"]
    },
    {
        name : 'åå¦ƒ',
        hp : 130,
        speed :90,
        skill: ["èµäº†ä½ ä¸€ä¸ˆçº¢", "é€äº†ä½ ä¸€ç›˜é…¸é»„ç“œ", "å¯¹ä½ è¯´äº†å¥è´±äººå°±æ˜¯çŸ«æƒ…"]
    },
    {
        name : 'çš‡å',
        hp : 200,
        speed :130,
        skill: ["å‘çš‡ä¸Šæèµ·äº†çº¯å…ƒçš‡å", "å¤´é£åˆå‘ä½œäº†", "å—åˆ°å¤ªååº‡ä½‘"]
    },
    {
        name : 'æ²ˆçœ‰åº„',
        hp : 115,
        speed :110,
        skill: ["ç”Ÿç—…äº†æ‰¾æ¸©å¤ªåŒ»", "è¯´è‡ªå·±åªè¯»è¿‡ã€Šå¥³åˆ™ã€‹å’Œã€Šå¥³è®­ã€‹", "åœ¨å®«é‡Œæ”¾æ»¡äº†èŠèŠ±"]
    },
    {
        name : 'æ•¬å¦ƒ',
        hp : 120,
        speed :120,
        skill: ["å‘ä½ ä¸¢å‡ºäº†ä¸€å—å®«é‡Œçš„ç –çŸ³", "å‘åŠ¨äº†èƒ§æœˆå¤§é­”ç‹", "è¢«çš‡ä¸Šæ¨äº†ä¸€ä¸‹"]
    }
];

var levelName = ["å®˜å¥³å­", "ç­”åº”", "å¸¸åœ¨", "è´µäºº", "å«”", "å¦ƒ", "è´µå¦ƒ", "çš‡è´µå¦ƒ", "çš‡å", "çš‡å¤ªå", "çš‡å¤ªåâ˜…", "çš‡å¤ªåâ˜…â˜…", "çš‡å¤ªåâ˜…â˜…â˜…"];
var levelExp = [1, 100, 200, 400, 800, 1600, 3200, 6400, 12800, 25600, 51200, 102400, 204800];

var mySkill = ["è£…é€¼", "æå¤–é‡", "ä¾å¯"];
var index = 0;
var enemy = null;
var intervalId = "";

var _exp = 0;
var _hp = 100;
var _speed = 100;


var levelIndex = 1 + parseInt(Math.random()*7);
init();

function init() { 
    _exp = levelExp[levelIndex - 1];
    updateInfo(_exp);
    var news = document.createElement('p');
    news.innerText = 'åˆå…¥å®«é—±å¾—åˆ°çš‡å¸ä¸´å¹¸ï¼Œè¢«å°ä¸ºã€' + infoLevel.innerText + 'ã€‘';
    newsBox.appendChild(news);
}

function updateInfo(exp) {
    console.log(exp);
    oldIndex = levelIndex;
    levelIndex = levelExp.findIndex(function(ele) {
        return ele > _exp;
    });
    infoLevel.innerText = levelIndex == 0 ? levelName[0] : levelName[levelIndex - 1];
    infoCurExp.innerText = _exp;
    infoNeedExp.innerText = levelExp[levelIndex];
    infoHP.innerText = _hp;
    infoSpeed.innerText = _speed;
    
    var news = document.createElement('p');
    if (levelIndex > oldIndex) {
        news.innerText = "åœ¨å®«æ–—ä¸­è¿‡å…³æ–©å°†, è¢«æ™‹å°ä¸ºã€" + infoLevel.innerText + "ã€‘";
    } else if (levelIndex < oldIndex) {
        news.innerText = "åœ¨å®«æ–—ä¸­æƒ¨é­é™·å®³, è¢«é™ä¸ºã€" + infoLevel.innerText + "ã€‘";
    }
    newsBox.appendChild(news);

}


oBtn.onclick = function(){
    startBtn.disabled = true;
    middle.innerText = ""
    myHp.innerText = _hp;
    mySpeed.innerText = _speed;
    turn = 1;
    startPK();
}



function startPK(){
    index = parseInt(Math.random()*person.length);
    enemy = person[index];
    oName.innerText = enemy.name;
    oHp.innerText = enemy.hp;
    oSpeed.innerText = enemy.speed;
    intervalId = setInterval('pk()',200);
}

function pk(){
    if(oHp.innerText > 0 && myHp.innerText > 0){
        var process = document.createElement('p');
        if(circle){
            var index2 = parseInt(Math.random() * mySkill.length);
            var damage = parseInt(Math.random() * _speed / 3);
            process.innerText = 'ã€ç¬¬' + turn + 'å›åˆã€‘ ä½ ' + mySkill[index2] + ", å¯¹" + enemy.name + "é€ æˆ" + damage + "ç‚¹ä¼¤å®³ã€‚";
            oHp.innerText -= damage;
        }else{
            var index2 = parseInt(Math.random() * enemy.skill.length);
            var damage = parseInt(Math.random() * enemy.speed / 3);
            process.innerText = 'ã€ç¬¬' + turn + 'å›åˆã€‘ ' + enemy.name + enemy.skill[index2] + "å¯¹ä½ é€ æˆ" + damage + "ç‚¹ä¼¤å®³ã€‚";
            myHp.innerText -= damage;
        }
        turn = turn + 1;
        middle.appendChild(process);
        circle = !circle;
    }else{
        var process = document.createElement('p');
        process.style.color = "red";
        process.innerText = 'ã€å®«æ–—ç»“æŸã€‘';
        if(myHp.innerText <= 0){ 
            var reducedExp = enemy.speed;   
            process.innerText += 'ä½ è¢«' + enemy.name + 'å‡»è´¥ï¼Œ æ‰£é™¤' + reducedExp + 'ç‚¹ç»éªŒå€¼ã€‚';  
            _exp -= reducedExp; 
            _hp -= parseInt(Math.random() * 10);
            _speed += parseInt(Math.random() * 10);       
        }else{
            var increasedExp = parseInt(enemy.speed * 1.5 + mySpeed);
            process.innerText += 'ä½ æˆåŠŸå‡»è´¥' + enemy.name + 'ï¼Œ å¢åŠ ' + increasedExp + 'ç‚¹ç»éªŒå€¼ã€‚'; 
            _exp += increasedExp;
            _hp += parseInt(Math.random() * 20);
            _speed += parseInt(Math.random() * 20);  
        }
        middle.appendChild(process);
        startBtn.disabled = false;
        clearInterval(intervalId);
        updateInfo(_exp);
    }

}

</script>
</html>



